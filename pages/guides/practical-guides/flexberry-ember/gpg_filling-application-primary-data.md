---
title: Заполнение первичных данных приложения
sidebar: guide-practical-guides_sidebar
keywords: guide, ember, ember-cli, REST-архитектура
toc: true
permalink: ru/gpg_filling-application-primary-data.html
lang: ru
---

Для того, чтобы увидеть, как работает созданная нами система, заполним данными таблицы.

## Сотрудники

Добавим нового сотрудника. Для этого нажмем на кнопку “**Добавить**” над таблицей во вкладке “**Сотрудники**”:

![Списковая форма "Сотрудники"](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-1.png)

Заполним поля формы следующим образом:

![Новый сотрудник Иванов](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-2.png)

> *<u>Фамилия</u>*: Иванов  
> *<u>Имя</u>*: Иван  
> *<u>Отчество</u>*: Иванович  
> *<u>Телефон</u>*: 200-00-01  
> *<u>Электронная почта</u>*: ivanovii@shop.ru  
> *<u>Должность</u>*: Кладовщик

{% include note.html content="Поле табельный номер уже заполнено со значением 1. Это - прямое следствие установленного для него автоинкремента и значения по умолчанию. Значение этого поля мы вручную менять не будем." %}

Нажмем кнопку **`[Сохранить]`** и перейдем обратно во вкладку “**Сотрудники**”.

![Список сотрудников с первой записью](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-3.png)

У нас есть первая запись о сотрудниках.

---

**_Самостоятельно_** внесите следующие данные:

**Сотрудники**
> *<u>Фамилия</u>*: Петров  
> *<u>Имя</u>*: Пётр  
> *<u>Отчество</u>*: Петрович  
> *<u>Телефон</u>*: 200-00-02  
> *<u>Электронная почта</u>*: petrovpp@shop.ru  
> *<u>Должность</u>*: Кладовщик  

> *<u>Фамилия</u>*: Александрова  
> *<u>Имя</u>*: Александра  
> *<u>Отчество</u>*: Александровна  
> *<u>Телефон</u>*: 200-00-03  
> *<u>Электронная почта</u>*: aleksandrovaaa@shop.ru  
> *<u>Должность</u>*: Менеджер  

> *<u>Фамилия</u>*: Евгеньева  
> *<u>Имя</u>*: Евгения  
> *<u>Отчество</u>*: Евгеньевна  
> *<u>Телефон</u>*: 200-00-04  
> *<u>Электронная почта</u>*: evgenyevaee@shop.ru  
> *<u>Должность</u>*: Менеджер 

---

В процессе добавления записей замечаем одну важную деталь: при создании новой записи табельный номер в форме всегда проставляется 1, но после сохранения (обновить страницу или перейти во вкладку “Сотрудники”) мы замечаем, что номер устанавливается в строгой последовательности.

![Недостатки автонумерации](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-4.png)

Это происходит потому, что автоинкремент в REST-архитектуре (а Ember-приложение, сгенерированное с использованием Flexberry Designer, использует именно её) работает либо на стороне сервера (как в нашем приложении), либо на стороне клиента. Наиболее простым решением вопроса отображения "некорректного" начального значения табельного номера будет скрыть поле “Табельный номер” на формы редактирования и отображать его только в списковой форме. Это мы сделаем далее.

Итогом данного шага должна быть следующая таблица:

![Заполненная таблица "Сотрудники"](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-5.png)

{% include note.html content="Если вы удалите последнюю запись (например, у нас это запись с табельным номером 4), то следующая будет все-равно с номером 5, т.к. в последовательности в БД номер 4 уже был использован. Нет ничего страшного, если табельные номера у вас будут идти не по порядку: данное поле не предназначено для изменения значения вручную." %}

## Товары

---

**_Самостоятельно_** внесите следующие данные:

**Товары**
> *<u>Наименование</u>*: Монитор Samsung C24F390FHI  
> *<u>Единица измерения</u>*: шт.  
> *<u>Описание</u>*: Диагональ экрана 23.5"(59 см)  
> *<u>Цена за ед.</u>*: 8990  
> *<u>Вес</u>*: 3.3  

> *<u>Наименование</u>*: Монитор игровой MSI Optix MAG241CP  
> *<u>Единица измерения</u>*: шт.  
> *<u>Описание</u>*: Диагональ экрана 24"(60.9 см)  
> *<u>Цена за ед.</u>*: 21990  
> *<u>Вес</u>*: 5.1  

> *<u>Наименование</u>*: Системный блок Acer Aspire XC-330 DT.BD2ER.001  
> *<u>Единица измерения</u>*: шт.  
> *<u>Описание</u>*: Процессор AMD A4 9120e 1.5 ГГц  
> *<u>Цена за ед.</u>*: 19990  
> *<u>Вес</u>*: 5.5  

> *<u>Наименование</u>*: Системный блок игровой Lenovo Legion T530-28ICB MT (90JL00M4RS)  
> *<u>Единица измерения</u>*: шт.  
> *<u>Описание</u>*: Процессор Intel Core i3 8100 3.6 ГГц  
> *<u>Цена за ед.</u>*: 47990  
> *<u>Вес</u>*: 12  

---

Итог данного шага:

![Заполненная таблица "Товары"](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-6.png)

## Склады

Добавим склад:

![Новый склад](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-7.png)

Здесь мы можем видеть два поля нового типа: <span style="color: #22b14c">**мастеровое**</span> (ассоциация) и <span style="color: #00a2e8">**детейловое**</span> (композиция). Заполним поля следующим образом:

> *<u>Адрес</u>*: ул. Ленина, д. 1, коп. а  
> *<u>Кладовщик</u>*: Петров (Петр Петрович, таб. ном. 2)  
> *<u>Список товаров</u>*:   
> Монитор Samsung C24F390FHI - 4 (шт.)  
> Системный блок Acer Aspire XC-330 DT.BD2ER.001 - 2 (шт.)  
> Монитор игровой MSI Optix MAG241CP - 1 (шт.)  

Выбор значения **мастерового поля**: 

![Лукап "Кладовщик"](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-8.png)

Добавление значения **детейлового поля**: 

![Добавление строки к списку товаров](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-9.png)

Выбор значения **мастерового поля для детейла**:

![Добавление товара в строке списка товаров](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-10.png)

В итоге получим заполненную следующим образом форму:

![Форма редактирования склада 1](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-11.png)

![Список складов с первой записью](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-12.png)

{% include note.html content="В списковой форме детейлы не отображаются." %}

---

**_Самостоятельно_** внесите следующие данные:

**Склады**
> *<u>Адрес</u>*: ул. Ленина, д. 1, коп. б  
> *<u>Кладовщик</u>*: Иванов (Иван Иванович, таб. ном. 1)  
> *<u>Список товаров</u>*:   
> Монитор Samsung C24F390FHI - 1 (шт.)  
> Монитор игровой MSI Optix MAG241CP - 2 (шт.)

---

**Итог** данного шага:

![Заполненная таблица "Склады"](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-13.png)

## Заказ

При открытии формы создания заказа мы увидим следующее:

![Новый заказ](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-14.png)

<span style="color: #22b14c">**Часть полей**</span> была заполнена автоматически при создании: 

*<u>Номер</u>* - так же, как и в предыдущих случаях (при сохранении будет присвоен уникальных номер в рамках последовательности);  
*<u>Статус</u>*- Новый, в соответствии с правилом автозаполнения OrderStatus = New;  
*<u>Дата</u>* - текущая дата (на самом деле, дата и время, но отображается только дата, что корректно).

<span style="color: #00a2e8">**Поле “Стоимость заказа”**</span> должно вычисляться автоматически, в соответствии с суммой по всем позициям содержимого заказа.

<span style="color: #ff7f27">**Содержимое заказа**</span> тоже имеет часть полей, вычисление значений которых нужно каким-то образом донастроить:

*<u>Цена с налогом</u>* - рассчитывается от цены Товара при фиксированной ставке налога;  
*<u>Сумма по позициям</u>* - рассчитывается по формуле [ Цена с налогом ] * [ Количество ];  
*<u>Количество</u>* - проводится валидация того, есть ли на всех складах, вместе взятых, указанное количество товара.

Таким образом, перед добавлением первого **Заказа** необходимо произвести некоторые действия по настройке полей.

## Накладная

Похожую историю мы имеем с накладными:

![Новая накладная](/images/pages/guides/flexberry-ember/4-2-filling-application-primary-data/4-2-15.png)

На этой форме полей, которые следует заполнить с использованием автоматических вычислений, гораздо больше. Так, при выборе <span style="color: #ff7f27">**заказа**</span> из него должны считываться и добавляться на форму:
1. сумма заказа;
2. список товаров с возможностью вручную проставить им вес.

При проставлении <span style="color: #00a2e8">**веса**</span> товаров автоматически должен вычисляться <span style="color: #00a2e8">**общий вес заказа**</span>.

## Итог

В результате генерации и базового наполнения данными мы получили минимально рабочее приложение. В дальнейшем мы произведем некоторые изменения, направленные на автоматизацию процесса вычисления требуемых полей на формах.

## Перейти

* [Практическое руководство  «Делай как я»](gpg_landing-page.html) <i class="fa fa-arrow-up" aria-hidden="true"></i>

* [Запуск Ember-приложения](gpg_launch-ember-applications.html) <i class="fa fa-arrow-left" aria-hidden="true"></i>
* [Условное отображение полей](gpg_conditional-display-fields.html) <i class="fa fa-arrow-right" aria-hidden="true"></i>